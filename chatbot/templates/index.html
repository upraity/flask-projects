<!-- https://aistudio.google.com/apikey -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Chatbot</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f4f4f4;
        }

        #chatbox {
            width: 60%;
            height: 400px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            background: white;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
        }

        .message {
            max-width: 70%;
            padding: 10px;
            margin: 5px;
            border-radius: 10px;
            display: inline-block;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .user { 
            align-self: flex-end; 
            background-color: #0078ff; 
            color: white; 
            text-align: right;
        }

        .bot { 
            align-self: flex-start; 
            background-color: #e0e0e0; 
            color: black; 
            text-align: left;
        }

        #inputContainer {
            width: 60%;
            display: flex;
        }

        input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            padding: 10px 15px;
            margin-left: 10px;
            background: #0078ff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            background: #005bb5;
        }
    </style>
</head>
<body>
    <h2>Health Chatbot</h2>
    <div id="chatbox"></div>
    <div id="inputContainer">
        <input type="text" id="userInput" placeholder="Ask a health-related question...">
        <button onclick="sendMessage()">Send</button>
    </div>

    <script>
      window.onload = function() {
            let chatbox = document.getElementById("chatbox");
            let messages = JSON.parse(localStorage.getItem("chatHistory")) || [];

            messages.forEach(msg => {
                let messageDiv = document.createElement("div");
                messageDiv.classList.add("message", msg.type);
                messageDiv.innerText = msg.text;
                chatbox.appendChild(messageDiv);
            });

            chatbox.scrollTop = chatbox.scrollHeight;
        };

        function sendMessage() {
            let userInput = document.getElementById("userInput").value.trim();
            if (!userInput) return;

            let chatbox = document.getElementById("chatbox");

            // User Message
            let userMessage = document.createElement("div");
            userMessage.classList.add("message", "user");
            userMessage.innerText = userInput;
            chatbox.appendChild(userMessage);

            saveToLocalStorage(userInput, "user"); // Save User Message
            document.getElementById("userInput").value = "";
            chatbox.scrollTop = chatbox.scrollHeight;

            // Show "Bot is typing..."
            let typingMessage = document.createElement("div");
            typingMessage.classList.add("message", "bot");
            typingMessage.innerText = "Typing...";
            chatbox.appendChild(typingMessage);
            chatbox.scrollTop = chatbox.scrollHeight;

            // Possible ways user might ask "Who are you?"
            let identityQuestions = [
                "tum kaun ho", "tum kya ho", "tum kiske ho", "tumhara naam kya hai",
                "tumhe kisne banaya", "tum kiske chatbot ho", "tum kya karte ho",
                "who are you", "what are you", "what is your name",
                "tumhari pehchan kya hai", "tumhara kaam kya hai", "tum kya kar sakte ho",
                "tumhara purpose kya hai", "tumhari identity kya hai", "tum kaise bane",
                "kya tum insaan ho", "kya tum robot ho", "tum robot ho kya", "tum kiske liye kaam karte ho",
                "tumhari soch kya hai", "tumhari umar kya hai", "tum kitne purane ho",
                "tum kaise kaam karte ho", "kya tum zinda ho", "tum zinda ho kya",
                "tumhare creator kaun hai", "tumhe kisne design kiya", "tumhara uddeshya kya hai",
                "kya tum insaano jese ho", "tum kaise sochte ho", "tumhari sochne ki shakti kya hai",
                "tumhara malik kaun hai", "kya tum ek machine ho", "tumhari history kya hai",
                "tumhse baat kyu kare", "tumhari importance kya hai", "tum kyun bane ho",
                "tum chatbot kyun ho", "tum mere liye kya kar sakte ho", "tum kya chatbot ho",
                "tum online ho ya offline", "tum kaha se aaye ho", "tum kahan rehte ho", "tumhe kisne banaya", "tumhare creator kaun hai", "tumhe kisne design kiya",
    "tumhara malik kaun hai", "tum kyun bane ho", "tum chatbot kyun ho"
            ];

            let lowerInput = userInput.toLowerCase();

            if (identityQuestions.some(q => lowerInput.includes(q))) {
                typingMessage.innerText = "मैं एक Health Care Chatbot हूँ।";
                saveToLocalStorage("मैं एक Health Care Chatbot हूँ।", "bot");
                chatbox.scrollTop = chatbox.scrollHeight;
                return;
            }


if (creatorQuestions.some(q => lowerInput.includes(q))) {
    typingMessage.innerText = "मैं एक Health Care Chatbot हूँ।";
    saveToLocalStorage("मैं एक Health Care Chatbot हूँ।", "bot");
    chatbox.scrollTop = chatbox.scrollHeight;
    return;
}


            // Normal API Request
            fetch("https://health-chat-bot-44ro.onrender.com/", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ message: userInput })
            })
            .then(response => response.json())
            .then(data => {
                typingMessage.innerText = data.reply; // Replace "Typing..." with actual reply
                saveToLocalStorage(data.reply, "bot");
                chatbox.scrollTop = chatbox.scrollHeight;
            })
            .catch(error => {
                typingMessage.innerText = "Error! Please try again.";
                console.error("Error:", error);
            });
        }

        // Function to save chat messages to localStorage
        function saveToLocalStorage(text, type) {
            let messages = JSON.parse(localStorage.getItem("chatHistory")) || [];
            messages.push({ text, type });
            localStorage.setItem("chatHistory", JSON.stringify(messages));
        }
    </script>
       
</body>
</html>
<!-- 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Chatbot</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f4f4f4;
        }

        #chatbox {
            width: 60%;
            height: 400px;
            overflow-y: auto;
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            background: white;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
        }

        .message {
            max-width: 70%;
            padding: 10px;
            margin: 5px;
            border-radius: 10px;
            display: inline-block;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .user { 
            align-self: flex-end; 
            background-color: #0078ff; 
            color: white; 
            text-align: right;
        }

        .bot { 
            align-self: flex-start; 
            background-color: #e0e0e0; 
            color: black; 
            text-align: left;
        }

        #inputContainer {
            width: 60%;
            display: flex;
        }

        input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            padding: 10px 15px;
            margin-left: 10px;
            background: #0078ff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            background: #005bb5;
        }
    </style>
</head>
<body>
    <h2>Health Chatbot</h2>
    <div id="chatbox"></div>
    <div id="inputContainer">
        <input type="text" id="userInput" placeholder="Ask a health-related question...">
        <button onclick="sendMessage()">Send</button>
    </div>

   <script>
    // Load old messages from localStorage
    window.onload = function() {
        let chatbox = document.getElementById("chatbox");
        let messages = JSON.parse(localStorage.getItem("chatHistory")) || [];

        messages.forEach(msg => {
            let messageDiv = document.createElement("div");
            messageDiv.classList.add("message", msg.type);
            messageDiv.innerText = msg.text;
            chatbox.appendChild(messageDiv);
        });

        chatbox.scrollTop = chatbox.scrollHeight;
    };

    function sendMessage() {
        let userInput = document.getElementById("userInput").value.trim();
        if (!userInput) return;

        let chatbox = document.getElementById("chatbox");

        // User Message
        let userMessage = document.createElement("div");
        userMessage.classList.add("message", "user");
        userMessage.innerText = userInput;
        chatbox.appendChild(userMessage);

        saveToLocalStorage(userInput, "user"); // Save User Message
        document.getElementById("userInput").value = "";
        chatbox.scrollTop = chatbox.scrollHeight;

        // Show "Bot is typing..."
        let typingMessage = document.createElement("div");
        typingMessage.classList.add("message", "bot");
        typingMessage.innerText = "Typing...";
        chatbox.appendChild(typingMessage);
        chatbox.scrollTop = chatbox.scrollHeight;

        fetch("https://healths-chatbot.onrender.com/chat", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: userInput })
        })
        .then(response => response.json())
        .then(data => {
            typingMessage.innerText = data.reply; // Replace "Bot is typing..." with actual reply
            saveToLocalStorage(data.reply, "bot");
            chatbox.scrollTop = chatbox.scrollHeight;
        })
        .catch(error => {
            typingMessage.innerText = "Error! Please try again.";
            console.error("Error:", error);
        });
    }

    // Function to save chat messages to localStorage
    function saveToLocalStorage(text, type) {
        let messages = JSON.parse(localStorage.getItem("chatHistory")) || [];
        messages.push({ text, type });
        localStorage.setItem("chatHistory", JSON.stringify(messages));
    }
</script>

</body>
</html>
 -->
